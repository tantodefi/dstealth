# XMTP Mini App Examples

This repository contains examples of XMTP mini apps with X402 payment protocol integration, social features, and AI-powered agents.

## Links

https://dstealth.vercel.app/
https://farcaster.xyz/~/developers/mini-apps/preview?url=https%3A%2F%2Fdstealth.vercel.app

https://github.com/coinbase/x402
https://github.com/builders-garden/base-minikit-starter/blob/main/app/dynamic-image-example/%5Bid%5D/page.tsx
https://www.clanker.world/clanker/0x2a810158dD24DC62477540c81194B4F817EB3944
https://www.empirebuilder.world/
https://basescan.org/token/0x2a810158dD24DC62477540c81194B4F817EB3944
https://www.google.com/search?q=github+clanker+fun&oq=github+clanker+fun&gs_lcrp=EgZjaHJvbWUyBggAEEUYOTIHCAEQIRigATIHCAIQIRigATIHCAMQIRigATIHCAQQIRigATIHCAUQIRigATIHCAYQIRiPAjIHCAcQIRiPAtIBCDMxMzNqMGo0qAIAsAIB&sourceid=chrome&ie=UTF-8
https://docs.bitquery.io/docs/examples/Base/base-clanker-api/ß
https://basescan.org/address/0x894c663757f6953544548EFA1aebc0846AC08bEa
https://console.upstash.com/login
https://basescan.org/token/0x767a739d1a152639e9ea1d8c1bd55fdc5b217d7f?a=0xcba202f6c6684c497c3fb7740a6f6ba14041cde8
https://docs.veil.cash/veil-cash-protocol/deployments
https://github.com/xmtp/XIPs/blob/main/XIPs/xip-21-transaction-reference-content-type.md
https://github.com/ScopeLift/stealth-address-erc-contracts
https://evmauth.io/#license
https://github.com/evmauth/evmauth-core
https://www.veil.cash/
https://docs.veil.cash/
https://stealthaddress.dev/contracts/deployments
https://app.umbra.cash/receive
https://github.com/ScopeLift/umbra-protocol
https://docs.fluidkey.com/readme/score
https://github.com/Fewsats/proxy402-docs
https://github.com/xmtp/XIPs/blob/main/XIPs/xip-51-agent-messages.md
https://community.xmtp.org/t/encryption-keys-are-pointless-browser-sdk/933
http://localhost:3000/api/proxy402/content?url=https%3A%2F%2Fproxy402.com%2Faek56kV2rb&payment=eyJ4NDAyVmVyc2lvbiI6MSwic2NoZW1lIjoiZXhhY3QiLCJuZXR3b3JrIjoiYmFzZS1zZXBvbGlhIiwid2FsbGV0IjoiMHg5QjJGQjdhOGQyMjdjRGFBODAwMmY4MGU4YzhBOTlhMTlCYjFiOTY5IiwicGF5bG9hZCI6eyJ0eEhhc2giOiIweDE5ZmNkODZhMTBmOWRkOTllMDRiYzIzZmUxYjY1MDg1MzNiYWFiOGY3ZjllMjQ2MDMwNWUxN2E1MDEwMzZjOWUiLCJhbW91bnQiOiIwLjAxIiwiYXNzZXQiOiIweDAzNkNiRDUzODQyYzU0MjY2MzRlNzkyOTU0MWVDMjMxOGYzZENGN2UiLCJwYXlUbyI6IjB4NzA2QWZCRTI4YjFlMUNCNDBjZDU1MkZhNTNBMzgwZjY1OGUzODMzMiIsImZyb20iOiIweDlCMkZCN2E4ZDIyN2NEYUE4MDAyZjgwZThjOEE5OWExOUJiMWI5NjkiLCJ0aW1lc3RhbXAiOjE3NDkxMDMyMjA4MTksImNoYWluSWQiOjg0NTMyfX0%3D
https://github.com/tantodefi/blockbuster
https://stealthaddress.dev/
https://app.umbra.cash/faq#how-can-i-scan-just-certain-range-of-blocks
https://blockbuster-video-demo.vercel.app/
https://www.basebatches.xyz/#calendar
https://devfolio.co/projects/replyguy-fd0e
https://github.com/fluidkey/fluidkey-stealth-account-kit
https://www.docs.whisk.so/kits/identity
https://app.fewsats.com/
https://github.com/Fewsats/fewsats-python
https://claudette.answer.ai/
https://paydocs.daimo.com/sdk#themes-and-customization
https://pay.daimo.com/
https://zkfetch.com/
https://github.com/reclaimprotocol/zk-fetch
https://dev.reclaimprotocol.org/my-applications/0x472D9ec8Da4CB9843627E3D7E23aC0B3B6ebF145
https://github.com/tantodefi/xmtp-agent-examples/tree/main/examples/xmtp-coinbase-agentkit
https://www.base.org/builders/minikit
https://docs.base.org/builderkits/minikit/overview
https://github.com/builders-garden/base-minikit-starter
https://www.base.org/builders/onchainkit
https://docs.base.org/builderkits/onchainkit/api/get-portfolios
https://github.com/coinbase/x402
https://tantodefi.convos.org/
https://www.npmjs.com/package/@reclaimprotocol/zk-fetch
https://github.com/ephemeraHQ/xmtp-agent-examples/tree/main/examples/xmtp-smart-wallet
https://reclaimprotocol.org/
https://base-batch-messaging.devfolio.co/overview
https://github.com/builders-garden/fluidpay/blob/main/lib/dynamic-api.ts
https://fluidpay.builders.garden/
https://github.com/xmtp/xmtp-js/tree/main/apps/xmtp.chat
https://www.base.org/builders/onchainkit
https://docs.base.org/cookbook/account-abstraction/gasless-transactions-with-paymaster
https://docs.base.org/builderkits/minikit/thinking-social
https://docs.cdp.coinbase.com/agentkit/docs/welcome
https://docs.base.org/builderkits/minikit/existing-app-integration
https://farcaster.xyz/
https://minikit-gold.vercel.app/ // could focus on making this a separatee x042:// viewer app 
https://github.com/daimo-eth/pay/blob/master/examples/nextjs-app/src/app/checkout/page.tsx
https://github.com/daimo-eth/pay/blob/master/examples/nextjs-app/src/app/mini-app/page.tsx
https://paydocs.daimo.com/sdk
https://daimo-pay-demo.vercel.app/
https://miniapps.farcaster.xyz/docs/guides/publishing
https://miniapps.farcaster.xyz/
https://nextjs.org/docs/app/guides/upgrading/version-15#route-handlers
https://docs.proxy402.com/getting-started/create-your-first-url
https://github.com/tantodefi/proxy402
https://docs.proxy402.com/getting-started/paying-for-content
https://docs.proxy402.com/api/routes#post-filesupload
https://proxy402.com/fetch
https://proxy402.com/aek56kV2rb
https://proxy402.com/dashboard
https://docs.proxy402.com/getting-started/verifying-requests
https://docs.proxy402.com/api









## 🏗️ Architecture Overview

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           XMTP + AgentKit Architecture                      │
└─────────────────────────────────────────────────────────────────────────────┘

┌──────────────────────┐    XMTP Messages    ┌─────────────────────────────────┐
│                      │ ◄─────────────────► │                                 │
│   Frontend (Vercel)  │                     │   Backend Agent (Render)       │
│                      │                     │                                 │
│  • BotChat Component │                     │  • X402BackendAgent             │
│  • XMTP Browser SDK  │                     │  • XMTP Node SDK                │
│  • Real-time Stream  │                     │  • Coinbase AgentKit            │
│  • UI/UX             │                     │  • OpenAI Integration           │
│                      │                     │  • Smart Wallet Features       │
└──────────────────────┘                     └─────────────────────────────────┘
           │                                                   │
           │                                                   │
           ▼                                                   ▼
┌──────────────────────┐                     ┌─────────────────────────────────┐
│                      │                     │                                 │
│   X402 Protocol      │                     │   Coinbase Developer Platform   │
│                      │                     │                                 │
│  • Payment Gateway   │                     │  • Smart Wallet                │
│  • Content Gating    │                     │  • Token Operations             │
│  • USDC on Base      │                     │  • DeFi Integration             │
│  • JWT Authentication│                     │  • Gas Sponsorship              │
│                      │                     │                                 │
└──────────────────────┘                     └─────────────────────────────────┘

Features:
🤖 AI-Powered Agent with OpenAI GPT-4
💰 X402:// Payment Protocol for Content Monetization  
🔗 Coinbase AgentKit for Smart Wallet Operations
🥷 Ninja Token Rewards & Social Features
📱 Real-time XMTP Messaging
🎯 Farcaster Frame Integration
```

## 🚀 Features

### 💰 **X402 Payment Protocol**
- Create payment-gated content with `x402://` URLs
- USDC payments on Base network
- Real-time earnings tracking
- JWT-based content authentication

### 🤖 **AI-Powered XMTP Agent**
- Natural language processing with OpenAI GPT-4
- Smart wallet operations via Coinbase AgentKit
- Real-time message streaming
- Command-based interactions (`/help`, `/create`, `/balance`, etc.)

### 🥷 **Social & Rewards System**
- Ninja token rewards for achievements
- Milestone-based progression
- Farcaster Frame integration
- Activity tracking and analytics

### 🔗 **Smart Wallet Features** (via AgentKit)
- Token deployment and management
- Cross-chain transactions
- Gas-sponsored operations
- DeFi protocol interactions

## 📋 Environment Variables

### **Frontend (.env.local on Vercel):**
```bash
# XMTP Configuration
NEXT_PUBLIC_XMTP_ENV=production

# Backend Agent Connection
NEXT_PUBLIC_BACKEND_AGENT_ADDRESS=0xYourBackendAgentAddress
NEXT_PUBLIC_BACKEND_URL=https://your-backend.onrender.com

# X402 Protocol
X402_JWT_SECRET=your-jwt-secret-key-min-32-chars
NEXT_PUBLIC_DEFAULT_PAYMENT_RECIPIENT=0xYourWalletAddress

# Redis (Upstash)
UPSTASH_REDIS_REST_URL=https://your-database.upstash.io
UPSTASH_REDIS_REST_TOKEN=your-upstash-token

# Webhooks
NOTIFICATION_WEBHOOK_URL=https://your-backend.onrender.com/api/webhooks/notifications
WEBHOOK_SECRET=your-webhook-secret-key

# Payment Configuration
NEXT_PUBLIC_USDC_CONTRACT_ADDRESS=0x833589fCD6eDb6E08f4c7C32D4f71b54bdA02913
NEXT_PUBLIC_DAIMO_PAY_URL=https://daimo.com/l/pay
```

### **Backend (.env on Render):**
```bash
# XMTP Configuration
WALLET_KEY=0x1111111111111111111111111111111111111111111111111111111111111111
ENCRYPTION_KEY=1111111111111111111111111111111111111111111111111111111111111111
XMTP_ENV=production
API_SECRET_KEY=your-api-secret-key

# Coinbase AgentKit (Optional)
CDP_API_KEY_NAME=your-cdp-api-key-name
CDP_API_KEY_PRIVATE_KEY=your-cdp-private-key
CDP_WALLET_DATA=your-wallet-data

# OpenAI (Optional)
OPENAI_API_KEY=sk-your-openai-api-key

# Redis (same as frontend)
UPSTASH_REDIS_REST_URL=https://your-database.upstash.io
UPSTASH_REDIS_REST_TOKEN=your-upstash-token

# Webhooks
WEBHOOK_SECRET=your-webhook-secret-key

# Service Configuration
FRONTEND_URL=https://your-frontend.vercel.app
PORT=5001
```

## 🛠️ Setup Instructions

### **1. Clone and Install**
```bash
git clone <repository-url>
cd xmtp-mini-app-examples

# Install frontend dependencies
cd frontend && yarn install

# Install backend dependencies  
cd ../backend && yarn install
```

### **2. Generate XMTP Keys**
```bash
# In backend directory
yarn gen:keys
```

### **3. Configure Environment Variables**
- Set up Vercel environment variables for frontend
- Set up Render environment variables for backend
- Configure Upstash Redis database
- Set up Coinbase Developer Platform (optional)

### **4. Deploy**
```bash
# Deploy frontend to Vercel
vercel --prod

# Deploy backend to Render
# (Push to connected GitHub repository)
```

## 🎯 Usage Examples

### **Chat with X402 Agent**
```
User: "Create a trading guide for 25 USDC"
Agent: ✅ Content Created Successfully!
       🔗 X402://: x402://yourapp.com/content/abc123?price=25&currency=USDC
```

### **Smart Wallet Operations**
```
User: "/send 5 USDC to vitalik.eth"
Agent: 🚀 Crypto Transfer Initiated
       Status: ✅ Confirmed
       Tx Hash: 0xabc123...
```

### **Token Deployment**
```
User: "/deploy MyToken MTK"
Agent: 🪙 Token Deployed Successfully!
       Contract: 0xdef456...
       Network: Base
```

## 🔧 Development

### **Local Development**
```bash
# Start backend
cd backend && yarn dev

# Start frontend  
cd frontend && yarn dev
```

### **Testing XMTP Integration**
1. Connect wallet to frontend
2. Use BotChat component to message backend agent
3. Try commands like `/help`, `/balance`, `/create`

## 📚 Documentation

- [X402 Protocol Guide](./frontend/X402_PROTOCOL_GUIDE.md)
- [Social Features Guide](./frontend/SOCIAL_FEATURES_GUIDE.md)
- [Farcaster Frames Guide](./frontend/FARCASTER_FRAMES_GUIDE.md)
- [XMTP Integration Guide](https://docs.xmtp.org/)
- [Coinbase AgentKit Docs](https://docs.cdp.coinbase.com/agentkit/)

## 🤝 Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Test thoroughly
5. Submit a pull request

## 📄 License

MIT License - see [LICENSE](./LICENSE) for details.